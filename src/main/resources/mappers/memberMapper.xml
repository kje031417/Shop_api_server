<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.shop.api.mapper.MemberMapper">
	<insert id="joinMember" parameterType="com.shop.api.dao.dto.Member">
		insert into member_info (
			mi_id,
			mi_pw,
			mi_name,
			mi_email,
			mi_mobile,
			<if test="mi_tell != null or mi_tell != ''">
				mi_tell,
			</if>
			mi_postcode,
			mi_address,
			mi_detailaddress
		)values(
			#{mi_id},
			#{mi_pw},
			#{mi_name},
			#{mi_email},
			#{mi_mobile},
			<if test="mi_tell != null or mi_tell != ''">
				#{mi_tell},
			</if>
			#{mi_postcode},
			#{mi_address},
			#{mi_detailaddress}
		)
	</insert>
	
	<update id="modifyMember" parameterType="com.shop.api.dao.dto.Member">
		update member_info 
		set 
			mi_name=#{mi_name},
			mi_email=#{mi_email},
			mi_mobile=#{mi_mobile},
			mi_tell=#{mi_tell},
			mi_postcode=#{mi_postcode},
			mi_address=#{mi_address},
			mi_detailaddress=#{mi_detailaddress}
		where mi_id=#{mi_id}
	</update>
	
	<delete id="withdrawMember" parameterType="com.shop.api.dao.dto.MemberId">
		delete from member_info
		where mi_id=#{mi_id}
	</delete>
	
	<select id="selectMember" parameterType="com.shop.api.dao.dto.MemberId" resultType="com.shop.api.dao.dto.Member">
		select 
			mi_id,
			mi_pw,
			mi_name,
			mi_email,
			mi_mobile,
			mi_tell,
			mi_postcode,
			mi_address,
			mi_detailaddress,
			mi_createdat
		from member_info 
		where mi_id = #{mi_id}
	</select>
</mapper>
